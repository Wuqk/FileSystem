<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
</head>

<script src="../js/jquery-3.4.1.min.js"></script>
<script>
    $(function () {
        $("#sub").click(function () {
            var uname = $("#uname").val()
            var upwd = $("#upwd").val()
            var cpwd = $("#cpwd").val()
            if (uname!=null && upwd==cpwd){
                // alert("1111111111111")
                var info = JSON.stringify({
                    uname:uname,
                    upwd:upwd
                })
                $.ajax({
                    type:"post",
                    // url:"http://192.168.0.231:8080/login/register",
                    url:"http://localhost:8080/login/register",
                    data:info,
                    contentType:"application/json",
                    dataType:"json",
                    xhrFields:{
                        withCredentials:true
                    },
                    success:function (msg) {
                        if (eval(msg)==1){
                            alert("注册成功，请登录")
                            location.href="login.html"
                        } else if (eval(msg)==0){
                            alert("用户已存在！")
                        } else {
                            alert("注册异常！")
                        }
                        // alert(eval(msg));
                    }
                })
            }
        })
    })
</script>
<body>
<table align="center">
    <tr>
        <td>用户名:</td>
        <td><input id="uname" type="text" placeholder="请输入用户名"></td>
    </tr>
    <tr>
        <td>密码:</td>
        <td><input id="upwd" type="password" placeholder="请输入密码"></td>
    </tr>
    <tr>
        <td>确认密码:</td>
        <td><input id="cpwd" type="password" placeholder="请再次输入密码"></td>
    </tr>
    <tr>
        <td>
            <button id="sub">提交</button>
        </td>
        <td>
            <a href="login.html"><button>登录</button></a>
        </td>
    </tr>
</table>

</body>
</html>